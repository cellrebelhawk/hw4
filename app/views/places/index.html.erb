<h1>Places</h1>

<% if User.find_by({ "id" => session["user_id"] }) != nil %>

<p>
  <a class="btn btn-primary" href="/places/new" role="button">New place</a>
</p>

    
<ul class="list-group">
  <% for place in @places %>
    <a href="/places/<%= place["id"]%>" class="list-group-item d-flex justify-content-between align-items-center">
      <%= place["name"] %>
      <span class="badge text-bg-primary rounded-pill">
        <%=Entry.where({"user_id" => session["user_id"], "place_id" => place["id"]}).count%>
      </span>
    </li></a>
  <% end %>
</ul>

<% else %>
  You must be 
  <a href="/login">logged in</a> 
  to access this page. You will be redirected automatically.
  <meta http-equiv="refresh" content="3; URL=/login/">
<% end %>


<!-- 
<% for place in @places %>
  <div class="container">
    <div class="card" style="width: 18rem;">
      <img src="..." class="card-img-top" alt="...">
      <div class="card-body">
        <h5 class="card-title"><%= place["name"] %></h5>
        <a href="/places/<%= place["id"] %>" class="btn btn-primary">See entries</a>
      </div>
    </div>
  </div>
<% end %>


<div class="container text-center">
  <div class="row g-4">
    <% for place in @places %>
      <div class="col">
        <div class="container">
          <div class="card" style="width: 18rem;">
             <img src="..." class="card-img-top" alt="...">
            <div class="card-body">
              <h5 class="card-title"><%= place["name"] %></h5>
              <a href="/places/<%= place["id"]%>" class="btn btn-outline-primary">See entries</a>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
-->